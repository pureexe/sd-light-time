Bootstrap: docker
From: pytorch/pytorch:2.4.1-cuda12.4-cudnn9-devel
Stage: build

%post
    # update from ubuntu first
    apt update
    # install Linux tools for ffmpeg
    apt install -y libxrender1 libfontconfig1 ffmpeg 
    # install openexr-related 
    apt install -y libopenexr-dev
    # install pytorch related library
    pip install -r https://raw.githubusercontent.com/pureexe/sd-light-time/refs/heads/main/requirement.txt
    NOW=`date`
    echo "export NOW=\"${NOW}\"" >> $SINGULARITY_ENVIRONMENT

%labels
    Author pakkapon.p_s19@svistec.ac.th
    Version v0.0.1

%help
    Container for relighting project
